<!DOCTYPE HTML>
<html lang="en">

<head>
	
	<title>WoT - Vertical Approach</title>
	
	<meta name="author" content="Marius Runde">
	<meta name="keywords" content="Geospatial Web of Things">

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1F4BFF">

	<link rel="icon" type="image/ico" href="img/favicon.ico">

	<!-- Import stylesheets -->
	<link rel="stylesheet" type="text/css" href="lib/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="lib/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css">
	<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="lib/mapbox.js/mapbox.css">
	<link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

	<!-- Navigation bar -->
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span> 
				</button>
				<a class="navbar-brand" href="#">WoT - Vertical Approach</a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#"><i class="fa fa-home"></i> Map</a></li>
					<li><a href="/docs" target="_blank"><i class="fa fa-cogs" aria-hidden="true"></i> API</a></li>
					<li><a href="https://github.com/mrunde/WoT-Vertical-Approach" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Source</a></li>
					<li><a href="licenses.html">Licenses</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#"><i class="fa fa-user-plus" aria-hidden="true"></i> Sign Up</a></li>
					<li><a href="#"><i class="fa fa-sign-in" aria-hidden="true"></i> Login</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- Content -->
	<div id="content" class="row">
		<div id="info" class="col-md-4">
			<h3 id="thingname">Details 
				<button id="thingDownload" class="btn btn-default pull-right disabled" data-toggle="modal" data-target="#DownloadModal"> Download Data
				</button>
			</h3>	

			<div id="thingdetails">
				<div class="well">
					Click on a marker to display further details...
				</div>
			</div>
			<div id="chart">
				<canvas id="waterLevelChart" width="400" height="100"></canvas>
			</div>
			<!--<div id="forecast">
				<iframe id="forecast_embed" type="text/html" frameborder="0" height="245" width="100%" src="http://forecast.io/embed/#lat=51.973387&lon=7.700213&name=MÃ¼nster&units=si"> </iframe>
			</div>-->
		</div>

		<div id="map" class="col-md-8">
			<div class="btn-group" id="filter" role="group" aria-label="filter">
				<button class="btn special">
					<b>Filters:</b>
				</button>
				<button id="filter_all" type="button" class="btn btn-primary">
					<i class="fa fa-circle"></i>&nbsp;&nbsp;All
				</button>
				<button id="filter_last_24h" type="button" class="btn btn-default">
					<i class="fa fa-clock-o"></i>&nbsp;&nbsp;Last 24h
				</button>
				<button id="filter_last_7d" type="button" class="btn btn-default">
					<i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;&nbsp;Last Week
				</button>
				<button id="filter_my_things" type="button" class="btn btn-default">
					<i class="fa fa-user"></i>&nbsp;&nbsp;My Things
				</button>
				<button id="filter_custom" class="btn btn-default" data-toggle="modal" data-target="#customFilterModal" onclick="customFilterFactory.reset()">
					<i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp;&nbsp;Custom
				</button>
				</div>
			<div id="livemap"></div>
		</div>
	</div>

	<!-- Modal Download-->
	<div id="DownloadModal" class="modal fade" role="dialog">
		<div class="modal-dialog">
			
			<!-- Modal content -->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 id="DownloadOptions" class="modal-title" value="Download-Options"></h4>
				</div>

				<div class="modal-body" id="modal-set-download-body">
					<div class="form-group">
						<label for="downloadFileNameLabel">Enter Filename</label>
						<input id="downloadFileName" type="text" class="form-control"	>
						<br>
						<p><b> File will be downloaded in JSON Format</b></p>
					</div>

				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="downloadThingData()">Download Data</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>

			</div> <!-- END Modal content -->
		</div>
	</div> <!-- Modal Download--> 

	<!-- Modal Filter-->
	<div id="customFilterModal" class="modal fade" role="dialog">
		<div class="modal-dialog">
			
			<!-- Modal content -->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Select Filter Method</h4>
				</div>
				<div class="modal-body" id="custom-filter-selection">
					<div class="list-group" id="filter-selection">
					  	<a href="#" class="list-group-item filter-select" onclick="customFilterFactory.createTemporalFilter()">
					    	<h4 class="list-group-item-heading">Temporal Query</h4>
					    	<p class="list-group-item-text">Query sensors based on the latest measurement.</p>
					  	</a>
					  	<a href="#" class="list-group-item">
					    	<h4 class="list-group-item-heading">Spatial Query</h4>
					    	<p class="list-group-item-text">Query sensors based on their location.</p>
					  	</a>
					  	<a href="#" class="list-group-item">
					    	<h4 class="list-group-item-heading">Spatio-Temporal Query</h4>
					    	<p class="list-group-item-text">Query sensors based on the latest measurement and their location.</p>
					  	</a>
					  	<a href="#" class="list-group-item">
					    	<h4 class="list-group-item-heading">Select by River</h4>
					    	<p class="list-group-item-text">Query all sensors located at a certain river.</p>
					  	</a>
					</div>
				</div>
				<div class="modal-body" id="custom-filter-datetime">
					<h4>Select a start time</h4>
					<div class="container">
					    <div class="row">
					        <div class='col-sm-6'>
					            <div class="form-group">
					                <div class='input-group date' id='datetimepicker-start'>
					                    <input type='text' class="form-control" />
					                    <span class="input-group-addon">
					                        <span class="glyphicon glyphicon-calendar"></span>
					                    </span>
					                </div>
					            </div>
					        </div>
					    </div>
					</div>
					<h4>Select an end time</h4>
					<div class="container">
					    <div class="row">
					        <div class='col-sm-6'>
					            <div class="form-group">
					                <div class='input-group date' id='datetimepicker-end'>
					                    <input type='text' class="form-control" />
					                    <span class="input-group-addon">
					                        <span class="glyphicon glyphicon-calendar"></span>
					                    </span>
					                </div>
					            </div>
					        </div>
					    </div>
					</div>
					<button type="button" onclick="customFilterFactory.back()" class="btn btn-warning">Back</button>
					<button type="button" onclick="customFilterFactory.next()" class="btn btn-success">Next</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div> <!-- Modal Filter-->
	
	<!-- Config import -->
	<script src="js/config.js"></script>

	<!-- Library imports -->
	<script src="lib/jquery/dist/jquery.min.js"></script>
	<script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="lib/mapbox.js/mapbox.js"></script>
	<script src="lib/Leaflet.MapboxVectorTile/dist/Leaflet.MapboxVectorTile.min.js"></script>
	<script src="lib/moment/min/moment.min.js"></script>
	<script src="lib/moment-timezone/builds/moment-timezone-with-data.min.js"></script>
	<script src="lib/Chart.js/dist/Chart.min.js"></script>
	<script src="lib/socket.io-client/socket.io.js"></script>
	<script src="lib/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
	<script scr="lib/file-saver/FileSaver.min.js"></script>	

	<!-- Script imports -->
	<script src="js/map.js"></script>	
	<script src="js/resize.js"></script>
	<script src="js/chart.js"></script>
	<script src="js/socket.js"></script>
	<script src="js/customFilter.js"></script>
	<script src="js/download.js"></script>

	<!-- Load AngularJS as last library to reduce conflict potential with the config functions -->
	<script src="lib/angular/angular.min.js"</script>

</body>

</html>